# 통계 기초

---

### 01. 가설 검정 주요 용어

- 가설 : 모집단의 특성, 특히 모수에 대한 가정 또는 잠정적 결론
- 가설 검정 시, 관심 있는 가설은 대립가설이며, 대립가설이 참이라는 확실한 근거가 없다면 귀무가설 기각하지 못함

| 종류   | 설명                                                             |
| ---- | -------------------------------------------------------------- |
| 귀무가설 | - 기존과 비교하여 변화/차이가 없음을 나타내는 가설<br>- **검정 방법에 따라 귀무가설의 내용이 달라짐** |
| 대립가설 | - 표본을 통해 확실한 근거를 가지고 입증하고자 하는 가설<br>- 연구가설 이라고도 함              |

- 가설 검정
  
  - 1 단계 : 모집단에 대해 가설 설정
  - 2 단계 : 모집단으로부터 추출된 표본 분석
  - 3 단계 : 연구 가설이 틀린지 맞는지 타당성 여부를 검정하는 통계적 기법

- 검정통계량
  
  - 모수를 추론하기 위해 필요한 표본 통계량
  - 귀무가설이 참이라는 전제하여 추출된 확률표본의 정보를 이용하여 계산
  - 중심극한정리 이론에 근거 ⇒ 적은 표본으로도 전체 모수 추정 가능

- 중심 극한 정리(CLT : Central Limit Theorem)
  
  - 정의 : 정규분포가 아닌 분포라도 선택된 표본들의 평균을 모아 다시 분포를 그리면 정규분포가 됨
  - 단, 최소 표본의 크기 30개 이상 **(n ≥ 30)**
  - 모집단 데이터의 평균 = 샘플 평균들의 평균 = Sampling Distribution의 평균

<img title="" src="https://t1.daumcdn.net/cfile/tistory/9903B2355E0EB41E1C" alt="" width="480" data-align="center">

- 가설 검정 오류
  
  - 제 1종 오류 : 귀무가설이 참이나, 귀무가설을 기각하는 오류(거짓이라고 판정)
  - 제 2종 오류 : 귀무가설이 거짓인데, 귀무가설 채택(사실이라고 판정)

- 의사결정의 기준
  
  - p-value : 유의수준과 비교하여 **p-value가 유의수준보다 작을 경우 귀무가설을 기각하고 대립가설을 채택**
  - 유의수준 **α : 가설검정에서 귀무가설을 기각하는 기준**
  - 1종 오류를 범할 확률
    - **α = 0.01(1%) ⇒** 매우 보수적이며 엄격한 판단(표본에서 구한 통계량 값이 나올 확률이 1%보다 작음)
    - **α = 0.05(5%) ⇒** 오류 5%까지 허용, 상대적으로 덜 엄격한 의사결정

- p-value와 임계값
  
  - 귀무가설 𝐻 0 가 참일 때 표본에서 얻어진 결과가 귀무가설을 기각하게 하는 확률
  
  - 주어진 유의수준 𝛼 하에서 귀무가설 𝐻 0 의 채택 또는 기각 여부를 판정하여 주는 기준이 되는 값

---

## 02. 단일표본 T-검정

- 가설 설정 : 
  
  - H0 = 모평균과 표본평균은 같다
  
  - H1 = 모평균과 표본평균은 같지 않다

```python
from scipy import stats
t_score, p_value = stats.ttest_1samp(df[‘Height’], popmean=75)
print(round(t_score, 2), round(p_value, 2))
>> 0.87, 0.39 
```



## 03. 독립표본 T-검정

- 가설 설정 : 
  
  - H0 = 그룹 1의 평균과 그룹 2의 평균은 같다
  
  - H1 = 그룹 1의 평균과 그룹 2의 평균은 같지 않다

- 가정
  
  - 독립성
  
  - Normaility 정규성
  
  - Homogeneity of Variance 분산의 동질성

- **정규성 검정**
  
  - 각 그룹의 표본수가 30개 이하일 때 검정 필요
  
  - 가설 : H0 = 각 자료는 정규분포를 따른다 / H1 = 각 자료는 정규분포를 따르지 않는다.
  
  - 확인 방법 : **<u>Shapiro-Wilk tests</u>**
  
  - 가정 위반 시, Mann-Whitney Test를 진행

- **등분산성 검정**
  
  - 각 그룹의 데이터 수가 다르면 분산이 같은지 검정
  
  - 만약, 각 그룹의 데이터 수가 동일하면, 분산이 같다고 가정
  
  - 가설 : H0 = 두 그룹의 분산 차이 없음 / H1 = 두 그룹의 분산 차이 있음
  
  - 확인방법 : bartlett, fligner, **<u>levene 검정</u>** 주로 사용
  
  - 가정 위반 시, Welch Test 사용

```python
from scipy import stats
stats.levene(df.loc[df['supp'] == "VC", 'len'], df.loc[df['supp'] == "OJ", 'len'])
LeveneResult(statistic=1.2135720656945064, pvalue=0.2751764616144053)
```

    ▶ **Levene** 검정은 모든 입력 샘플이 동일한 분산을 가진 모집단에서 나온 것이라는 귀무가설을 테스트 함





## 04. 대응표본 T-검정

- 실험 이전의 집단과 실험 이후의 집단이 동일한 경우 사용하는 검정

- 가설 
  
  - 귀무가설 : 실험전후 평균의 차이는 0이다
  
  - 대립가설 : 실험전후 평균의 차이는 0이 아니다

- 가정
  
  - 독립성
  
  - 정규성  : N<= 30일 때, **Shapiro-Wilk tests**로 확인
  
  ```python
  from scipy import stats
  t_score, p_value = stats.ttest_rel(df['before_spr'], df['after_spr'])
  print(round(t_score, 4), round(p_value, 2))
  
  # >>>> 14.8933 0.0
  ```



---

## 05. 분산분석

- 두 개 이상의 집단에서 그룹 평균 간 차이를 그룹 내 변동에 비교하여 살펴보는 통계 분석 방법
  
  - 집단 내에 분산보다 다른 집단과의 분산이 더 크면 유의하다는 개념
  
  - 3그룹 이상에 대한 평균 비교를 한다면, 무조건 분산 분석 진행



- **일원배치분산분석** (One-Way ANOVA) 
  
  - 반응값에 대한 하나의 범주형 변수의 영향을 알아보기 위해 사용되는 검증 방법
  
  - 모집단의 수에는 제한이 없으며, 각 표본의 수는 같지 않아도 된다.
  
  - F 검정 통계량을 이용한다.
  
  - 가설
    
    - 귀무가설 : K개의 집단 간 평균에는 차이가 없다
    
    - 대립가설 : K개의 집단 간 평균이 모두 같다고 할 수 없다
  
  - 일원 분산 분석은 두 개 이상의 그룹이 동일한 모집단 평균을 가지고 있다는 귀무가설을 테스트
    
    - 테스트는 크기가 서로 다른 두 개 이상의 그룹의 샘플에 적용
    
    - 귀무가설 채택 시, 종료
    
    - 귀무가설 기각, 대립가설 채택 시, **사후검정**을 진행해야 함(각 그룹별로 p-value 값 확인, 차이를 확인)
